## 1. 정의
여러 개발자가 하나의 코드 베이스에서 효율적으로 협업하고 코드 변경 사항을 관리하기 위한 규칙 및 워크플로우를 의미한다.
쉽게 말해서 Git Branch 들에 규칙을 부여하는 것이다.

## 2. 종류
깃 브랜치 전략은 정말 많다.
우선 본 글에서는 개발자들이 자주 고려하는 네 가지 전략에 대해서 알아보려고 한다.

### 1️⃣ Trunk-Based Development
![](https://i.imgur.com/qEUK0D7.png)
#### 구조
- `main` (=trunk)
- 아주 짧게 유지되는 작은 브랜치
#### 특징
기능 단위가 잘게 쪼개져 있다고 전제한다.
즉, 작은 브랜치들은 아주 짧게 유지된다.

브랜치가 많지 않고 작은 기능이 코드 리뷰를 거쳐 바로 main에 push되므로 속도가 매우 빠르다.
#### 장점
작은 기능 단위로 브랜치를 만들어 개발 후 main에 push하므로 conflict이 많이 발생하지 않는다.
작은 기능 단위로 브랜치가 push되니 main에 새로운 기능이 빠르게 반영되어잦은 배포가 가능하다.
#### 단점
main은 배포용 브랜치이기 때문에 test에 실패하는 브랜치를 push해서는 안된다. 
즉, 팀 내에 일관된 규칙이 있어야 한다.

TBD는 미완성된 기능도 main에 넣어서 관리하는 아이디어를 가진다. 
하지만 미완성 기능은 운영 시점에 사용자에게 노출되어서는 안된다.
그래서 기능은 코드 안에 존재하되, 실제로는 사용이 불가능하도록 feature flag로 관리해야만 안정성이 확보된다.

#### 적합한 환경
- 초고속 개발조직
- DevOps가 잘 구축되어 있는 팀
- 잦은 테스트가 필요한 대규모 서비스
###  2️⃣ Git Flow
![](https://i.imgur.com/36iN57q.png)
#### 구조
- `master`
  -  제품으로 출시되는 브랜치
- `hotfix`
  - 배포한 버전에서 긴급하게 수정할 필요가 있을 때 분리하는 브랜치이다.
  - master로부터 뻗어나와 develop과 master로 머지한다.
- `release`
  - 배포를 위한 최종적인 버그 수정 등의 개발을 하여 다음 버전 출시를 준비하는 브랜치이다.
  - develop으로부터 뻗어나와 develop, master에 머지한다. 출시된 master 브랜치에 버전 태그를 추가한다.
- `develop`
  - 다음 출시 버전을 대비하여 개발하는 브랜치
- `feature`
  - 추가 기능을 개발하는 브랜치이다.
  - develop으로부터 뻗어나와 develop에 머지한다.

#### 특징
릴리즈 중심이다.
브랜치가 많지만 역할이 명확하다.
릴리즈 주기가 길어 단위가 크거나 여러 팀이 동시에 개발하는 환경에 적합하다.

#### 장점
긴 릴리즈 주기에 안정적이다.
QA, 배포 준비 과정이 구조적으로 분리되어 있다.
여러 작업을 병렬로 처리하기에 편하다.

#### 단점
브랜치가 많아 관리가 복잡하다.
CI/CD는 기능이 완성되면 바로 merge를 하고 즉시 배포하는 흐름이기에 GitFlow를 이용하면 단계가 너무 많아져 비효율적이다.
작은 기능을 추가하더라도 릴리즈에 갇혀 오랫동안 배포될 수 없다.

#### 적합한 팀
- 대규모 조직 + 명확한 배포 일정
- QA 단계가 길고 안정성 중시
- 릴리즈 패키징이 필요한 곳

### 3️⃣ GitHub Flow
![](https://i.imgur.com/dtvPzzB.png)
GitHub에 적용하기에는 복잡하다는 판단에 의해 만들어진 새로운 깃 브랜치 전략이다.
그리고 GitHub라는 서비스가 갖고 있는 기능을 최대한 활용하기 위해 설계되었다.

> GitHub는 master를 항상 stable하게 유지하는 문화를 추구하고, PR 중심으로 협업한다.

#### 구조
- `master`
  - 항상 stable하게 유지되는 브랜치로 배포용 브랜치다.
- `feature`
  - 새롭게 개발하거나, 수정 시 분리하는 브랜치이다.
#### 특징
PR과 리뷰를 통해 master 서버에 푸시한다.
master로 merge 되었을 때는 즉시 배포되어야 한다.

GitHub는 액션으로 CI, 자동 배포, 빌드 자동 실행을 지원한다.
GitHub Flow는 PR과 master를 통한 즉시 배포에 용이하여 GitHub의 기능 활용에 좋다.

#### 장점
단순하다.
CI/CD와 궁합이 가장 좋다.
PR 기반 협업이 용이하다.

#### 단점
QA 단계를 별도로 두기 애매하다.
장기 릴리즈 준비 과정이 없다.
master가 곧 배포용 브랜치이기 때문에 잘못 merge 되었을 경우 문제가 심각하다.

#### 적합한 팀
- 스타트업, 빠른 개발 / 배포가 필요한 팀
- 웹 서비스 + 배포 자동화 완비
- 작은 기능을 빠르게 릴리즈하는 환경
### 4️⃣ GitLab Flow
![](https://i.imgur.com/lug8whx.png)
GitHub Flow의 단순함과 Git Flow의 체계적인 관리 방식을 결합하여 CI/CD에 최적화된 브랜치 전략이다.
GitLab의 DevOps 통합 플랫폼 특성을 기반으로 만들어졌다.

> GitLab은 Issue 단위로 MR을 올리고, CI를 통한 staging 단계와 CD를 지원한다.

#### 구성
- `Master`
  - issue 브랜치에서 개발한 기능을 포함한다.
- `pre-production`
  - master에 merge되어 GitLab CI에 의해 배포될 때 사용하는 브랜치다.
- `production`
  - 배포용 브랜치다.
#### 특징
master가 배포용 브랜치가 아니며, 환경 별로 브랜치를 두어 단계별로 배포가 가능하다.

#### 장점
CI/CD 파이프라인 설계에 유연하다.
환경과 버전 별 관리를 지원한다.

#### 단점
GitHub Flow보다는 약간 복잡하다.
안정적으로 사용하기 위해서는 운영/개발 브랜치 정책을 팀 내에서 잘 정해야 한다.

#### 적합한 팀
- staging과 production을 분리하는 조직

