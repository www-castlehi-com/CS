# 트랜잭션 적용 확인
## 트랜잭션 프록시 등록
![](https://i.imgur.com/1lzzBqv.png)
- `@Transactional` 애노테이션이 특정 클래스나 메서드에 하나라도 있으면 트랜잭션 AOP는 프록시를 만들어서 스프링 컨테이너에 등록
- `service$$CGLIB`를 스프링 빈에 등록
> 다형성 활용

![](https://i.imgur.com/RrmgrSs.png)
- 프록시는 내부에 실제 `service` 참조
- 메서드 호출 시 프록시는 메서드가 트랜잭션을 사용할 수 있는지 확인 후 적용 대상일 경우 트랜잭션 시작 후 실제 메서드 호출
- 호출이 끝나서 프록시로 제어가 돌아오면 프록시는 트랜잭션 로직을 커밋하거나 롤백해서 트랜잭션 종료
## 적용 여부
`TransactionSynchronizationManager.isActualTransactionActive()`
- 현재 쓰레드에 트랜잭션이 적용되어 있는지 확인
- `true` : 트랜잭션 적용
- `false` : 트랜잭션 미적용